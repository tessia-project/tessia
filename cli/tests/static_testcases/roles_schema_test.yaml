description: Test for the user roles schema
base_user: admin
tasks_order:
  - base_add
  - switch_to_dev1
  - check_USER_SANDBOX
  - switch_to_GEO_1_OWNER_PROJECT
  - grant_roles_GEO_1
  - check_OWNER_PROJECT
  - switch_to_GEO_2_OWNER_PROJECT
  - grant_roles_GEO_2
  - switch_to_GEO_1_ADMIN_LAB
  - check_ADMIN_LAB
  - switch_to_GEO_2_ADMIN_LAB
  - check_ADMIN_LAB_two_projects
  - switch_to_GEO_1_ADMIN_PROJECT
  - check_ADMIN_PROJECT
  - switch_to_dev1
  - check_USER
  - switch_to_USER_PRIVILEGED
  - check_USER_PRIVILEGED
  - switch_to_USER_RESTRICTED
  - check_USER_RESTRICTED
  - switch_to_USER_with_restricted_true
  - check_USER_with_restricted_true
tasks:
  base_add:
    # create projects
    - - perm project-add --name=GEO_1 --desc='GEO_1 project'
      - Item added successfully.
    - - perm project-add --name=GEO_2 --desc='GEO_2 project'
      - Item added successfully.
    # create project owners
    - - perm user-add --login=proj_owner1@example.com --name='Project owner 1' --title='Title of project owner'
      - User added successfully.
    - - perm role-grant --login=proj_owner1@example.com --name=OWNER_PROJECT --project=GEO_1
      - User role added successfully.
    - - perm user-add --login=proj_owner2@example.com --name='Project owner 2' --title='Title of project owner'
      - User added successfully.
    - - perm role-grant --login=proj_owner2@example.com --name=OWNER_PROJECT --project=GEO_2
      - User role added successfully.
    # add new users
    - - perm user-add --login=admin_lab1@example.com --name='Hardware admin 1' --title='Title of hardware admin'
      - User added successfully.
    - - perm user-add --login=admin_lab2@example.com --name='Hardware admin 2' --title='Title of hardware admin'
      - User added successfully.
    - - perm user-add --login=proj_admin1@example.com --name='Project admin 1' --title='Title of project admin'
      - User added successfully.
    - - perm user-add --login=proj_admin2@example.com --name='Project admin 2' --title='Title of project admin'
      - User added successfully.
    - - perm user-add --login=dev1@example.com --name='Developer 1' --title='Mr. Developer 1'
      - User added successfully.
    - - perm user-add --login=dev2@example.com --name='Developer 2' --title='Mr. Developer 2'
      - User added successfully.
    - - perm user-add --login=dev3@example.com --name='Developer 3' --title='Mr. Developer 3'
      - User added successfully.
    - - perm user-add --login=dev4@example.com --name='Developer 4' --title='Mr. Developer 4'
      - User added successfully.
    - - perm user-add --login=dev5@example.com --name='Developer 5' --title='Mr. Developer 5' --restricted
      - User added successfully.
    # grant USER_SANDBOX role to all new uses
    - - perm role-grant --login=admin_lab1@example.com --name=USER_SANDBOX --project='GEO_1'
      - User role added successfully.
    - - perm role-grant --login=admin_lab2@example.com --name=USER_SANDBOX --project='GEO_2'
      - User role added successfully.
    - - perm role-grant --login=proj_admin1@example.com --name=USER_SANDBOX --project='GEO_1'
      - User role added successfully.
    - - perm role-grant --login=proj_admin2@example.com --name=USER_SANDBOX --project='GEO_2'
      - User role added successfully.
    - - perm role-grant --login=dev1@example.com --name=USER_SANDBOX --project='GEO_1'
      - User role added successfully.
    - - perm role-grant --login=dev2@example.com --name=USER_SANDBOX --project='GEO_1'
      - User role added successfully.
    - - perm role-grant --login=dev3@example.com --name=USER_SANDBOX --project='GEO_1'
      - User role added successfully.
    - - perm role-grant --login=dev4@example.com --name=USER_SANDBOX --project='GEO_2'
      - User role added successfully.
    - - perm role-grant --login=dev5@example.com --name=USER_SANDBOX --project='GEO_1'
      - User role added successfully.
    # 'system add'
    - - system add --name=cpc3lp31 --hostname cpc3lp31 --type=LPAR --project='GEO_1' --owner=proj_owner1@example.com
      - Item added successfully.
    - - system add --name=cpc3lp32 --hostname cpc3lp32 --type=LPAR --project='GEO_1' --owner=dev1@example.com
      - Item added successfully.
    # server
    - - storage server-add --name=DS8K15 --model=DS8000 --type=DASD-FCP --project GEO_1
      - Item added successfully.
    # 'repo add'
    - - repo add --name='RHEL7.1-GA' --url='http://example.com/redhat/s390x/RHEL7.1/DVD' --project='GEO_1'
      - Item added successfully.
    # 'autotemplate add'
    - - autotemplate add --name=UBUNTU16.04 --content='files/autotemplate-command_test/ubuntu16-default.jinja' --project='GEO_1'
      - Item added successfully.
  switch_to_dev1:
    - - - conf key-gen
        - dev1@example.com
        - password
      - Key successfully created and added to client configuration.
  check_USER_SANDBOX:
    # help
    - - --help
      - Tessia command line client
    # 'system list'
    - - system list
      - No results were found.
    # 'system edit'
    - - system edit --name cpc3lp32 --desc 'lpar32'
      - system not found.
    # 'system add'
    - - system add --name=cpc3lp51 --hostname cpc3lp51 --type=LPAR
      - No CREATE permission found for the user in any project
    # check the role
    - - perm user-roles --login dev1@example.com
      - - ' User login *\| *Project name *\| *Role '
        - USER_SANDBOX
    - - perm role-list
      - 'Role            : USER'
    # find OWNER_PROJECT
    - - perm user-roles --role=OWNER_PROJECT
      - - ' User login *\| *Project name *\| *Role '
        - OWNER_PROJECT
  switch_to_GEO_1_OWNER_PROJECT:
    - - - conf key-gen
        - proj_owner1@example.com
        - password
      - Key successfully created and added to client configuration.
  grant_roles_GEO_1:
    - - perm role-grant --login=admin_lab1@example.com --name=ADMIN_LAB --project='GEO_1'
      - User role added successfully.
    - - perm role-deny --login=admin_lab1@example.com --name=USER_SANDBOX --project='GEO_1'
      - User role removed successfully.
    - - perm role-grant --login=proj_admin1@example.com --name=ADMIN_PROJECT --project='GEO_1'
      - User role added successfully.
    - - perm role-deny --login=proj_admin1@example.com --name=USER_SANDBOX --project='GEO_1'
      - User role removed successfully.
    - - perm role-grant --login=dev1@example.com --name=USER --project='GEO_1'
      - User role added successfully.
    - - perm role-deny --login=dev1@example.com --name=USER_SANDBOX --project='GEO_1'
      - User role removed successfully.
    - - perm role-grant --login=dev2@example.com --name=USER_PRIVILEGED --project='GEO_1'
      - User role added successfully.
    - - perm role-deny --login=dev2@example.com --name=USER_SANDBOX --project='GEO_1'
      - User role removed successfully.
    - - perm role-grant --login=dev3@example.com --name=USER_RESTRICTED --project='GEO_1'
      - User role added successfully.
    - - perm role-deny --login=dev3@example.com --name=USER_SANDBOX --project='GEO_1'
      - User role removed successfully.
    - - perm role-grant --login=dev5@example.com --name=USER --project='GEO_1'
      - User role added successfully.
    - - perm role-deny --login=dev5@example.com --name=USER_SANDBOX --project='GEO_1'
      - User role removed successfully.
    # admin_lab2@example.com is ADMIN_LAB in both GEO_1 and GEO_2
    - - perm role-grant --login=admin_lab2@example.com --name=ADMIN_LAB --project='GEO_1'
      - User role added successfully.
  check_OWNER_PROJECT:
    # 'perm user-add'
    - - perm user-add --login=dev5@example.com --name='Developer 5' --title='Mr. Developer 5'
      - You need administrator privileges to perform this operation
    # storage
    - - storage server-add --name=DS8K17 --model=DS8000 --type=DASD-FCP
      # User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - storage server-edit --name=DS8K15 --model=DS9000
      - User has no UPDATE permission for the specified resource
    - - storage server-del --name=DS8K15
      - User has no DELETE permission for the specified resource
    - - storage vol-add --server=DS8K15 --type=DASD --id=3900 --size=7gb
      # - User has no CREATE permission for the specified volume
      - No CREATE permission found for the user in any project
    # 'system add'
    - - system add --name=cpc3lp50 --hostname cpc3lp50 --type=LPAR
      # - User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    # 'system edit'
    - - system edit --name cpc3lp31 --desc 'lpar31'
      # - User has no UPDATE permission for the specified resource
      - Item successfully updated.
    - - system prof-add --system=cpc3lp31 --name=root1 --login=root:mypasswd
      # - User has no CREATE permission for the specified resource
      - Item added successfully.
    - - system prof-del --system=cpc3lp31 --name=root1
      - Item successfully deleted.
    - - system del --system cpc3lp31
      # - User has no DELETE permission for the specified resource
      - Item successfully deleted.
    # 'zone add'
    - - net zone-add --name=GEO_1-ERO
      # - User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    # repo add, update and delete
    - - repo add --name='RHEL7.2-GA' --url='http://example.com/redhat/s390x/RHEL7.2/DVD'
      # - User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - repo edit --name='RHEL7.1-GA' --desc='for GEO_1 project'
      - User has no UPDATE permission for the specified resource
    - - repo del --name='RHEL7.1-GA'
      - User has no DELETE permission for the specified resource
    # autotemplate
    - - autotemplate add --name=UBUNTU16 --content='files/autotemplate-command_test/ubuntu16-default.jinja'
      - No CREATE permission found for the user in any project
    - - autotemplate edit --name=UBUNTU16.04 --desc='Template for Ubuntu 16.04'
      - User has no UPDATE permission for the specified resource
    - - autotemplate del --name=UBUNTU16.04
      - User has no DELETE permission for the specified resource
  switch_to_GEO_2_OWNER_PROJECT:
    - - - conf key-gen
        - proj_owner2@example.com
        - password
      - Key successfully created and added to client configuration.
  grant_roles_GEO_2:
    - - perm role-grant --login=admin_lab2@example.com --name=ADMIN_LAB --project='GEO_2'
      - User role added successfully.
    - - perm role-deny --login=admin_lab2@example.com --name=USER_SANDBOX --project='GEO_2'
      - User role removed successfully.
    - - perm role-grant --login=proj_admin2@example.com --name=ADMIN_PROJECT --project='GEO_2'
      - User role added successfully.
    - - perm role-deny --login=proj_admin2@example.com --name=USER_SANDBOX --project='GEO_2'
      - User role removed successfully.
    - - perm role-grant --login=dev4@example.com --name=USER --project='GEO_2'
      - User role added successfully.
    - - perm role-deny --login=dev4@example.com --name=USER_SANDBOX --project='GEO_2'
      - User role removed successfully.
  switch_to_GEO_1_ADMIN_LAB:
    - - - conf key-gen
        - admin_lab1@example.com
        - password
      - Key successfully created and added to client configuration.
  check_ADMIN_LAB:
    # create infrastructure resources
    - - storage server-add --name=DS8K16 --model=DS8000 --type=DASD-FCP --project=GEO_2
      - User has no CREATE permission for the specified project
    - - storage server-add --name=DS8K16 --model=DS8000 --type=DASD-FCP
      - Item added successfully.
    - - storage vol-add --server=DS8K16 --type=DASD --id=3950 --size=7gb --owner=proj_admin1@example.com
      - Item added successfully.
    - - storage vol-add --server=DS8K16 --type=DASD --id=3951 --size=7gb --owner=dev1@example.com
      - Item added successfully.
    - - storage vol-add --server=DS8K16 --type=DASD --id=3952 --size=7gb --owner=dev1@example.com
      - Item added successfully.
    - - storage vol-add --server=DS8K16 --type=DASD --id=3953 --size=7gb --owner=dev2@example.com
      - Item added successfully.
    - - storage vol-add --server=DS8K16 --type=DASD --id=3954 --size=7gb --owner=dev3@example.com
      - Item added successfully.
    - - storage vol-add --server=DS8K16 --type=DASD --id=3955 --size=7gb --owner=dev5@example.com
      - Item added successfully.
    - - storage vol-add --server=DS8K16 --type=DASD --id=3956 --size=7gb
      - Item added successfully.
    - - storage vol-add --server=DS8K16 --type=DASD --id=3957 --size=7gb
      - Item added successfully.
    - - net zone-add --name=GEO_1-NE
      - Item added successfully.
    - - net subnet-add --zone=GEO_1-NE --name='GEO_1-NE-1822' --address=192.168.160.0/22
      - Item added successfully.
    - - net ip-add --subnet='GEO_1-NE-1822' --ip=192.168.161.51
      - Item added successfully.
    - - net ip-add --subnet='GEO_1-NE-1822' --ip=192.168.161.52 --project=GEO_2
      - User has no CREATE permission for the specified project
    # update and delete storage resources
      # server
    - - storage server-add --name=DS8K17 --model=DS8000 --type=DASD-FCP
      - Item added successfully.
    - - storage server-edit --name=DS8K17 --model=DS9000
      - Item successfully updated.
    - - storage server-del --name=DS8K17
      - Item successfully deleted.
      # not own resources
    - - storage vol-edit --id=3952 --size=10gb
      - Item successfully updated.
    - - storage vol-del --id=3952
      - Item successfully deleted.
      # own resources
    - - storage vol-edit --id=3956 --system cpc3lp32
      - Item successfully updated.
    - - storage vol-del --id=3957
      - Item successfully deleted.
    # update and delete net resources
    - - net zone-add --name=GEO_1-ERO
      - Item added successfully.
    - - net zone-del --name=GEO_1-ERO
      - Item successfully deleted.
    - - net zone-edit --name=GEO_1-NE --desc='lab zone'
      - Item successfully updated.
    # create systems
    - - system add --name=cpc3lp51 --hostname cpc3lp51 --type=LPAR
      - Item added successfully.
    - - system add --name=cpc3lp52 --hostname cpc3lp52 --type=LPAR --project GEO_2
      - User has no CREATE permission for the specified project
    - - system add --name=cpc3lp52 --hostname cpc3lp52 --type=LPAR --owner=dev4@example.com
      # - User has no ASSIGN permission for the specified project
    # - - system add --name=cpc3lp52 --hostname cpc3lp52 --type=LPAR
      - Item added successfully.
    - - system add --name=cpc3lp53 --hostname cpc3lp53 --type=LPAR
      # - Could not detect which project to use, specify one
      - Item added successfully.
    - - system add --name=cpc3lp54 --hostname cpc3lp54 --type=LPAR
      - Item added successfully.
    # 'system prof-add'
    - - system prof-add --system=cpc3lp51 --name=root1 --login=root:mypasswd
      - Item added successfully.
    # 'system del'
    - - system del --name cpc3lp54
      - Item successfully deleted.
    # update resources
    - - storage server-edit --name=DS8K16 --desc='new server'
      - Item successfully updated.
    - - system edit --name=cpc3lp53 --desc=lpar53
      - Item successfully updated.
    - - system edit --name=cpc3lp53 --owner=dev4@example.com
      - Item successfully updated.
    # 'perm user-add'
    - - perm user-add --login=dev5@example.com --name='Developer 5' --title='Mr. Developer 5'
      - You need administrator privileges to perform this operation
    # 'perm role-grant'
    - - perm role-grant --login=dev3@example.com --name=USER --project='GEO_1'
      - User has no CREATE permission to grant user roles in this project
    # repo add, edit and delete
    - - repo add --name='RHEL7.2-GA' --url='http://example.com/redhat/s390x/RHEL7.2/DVD'
      - Item added successfully.
    - - repo edit --name='RHEL7.1-GA' --desc='for GEO_1 project'
      - Item successfully updated.
    - - repo del --name='RHEL7.1-GA'
      - Item successfully deleted.
    # autotemplate
    - - autotemplate add --name=UBUNTU16 --content='files/autotemplate-command_test/ubuntu16-default.jinja'
      # User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - autotemplate edit --name=UBUNTU16.04 --desc='Template for Ubuntu 16.04'
      - User has no UPDATE permission for the specified resource
    - - autotemplate del --name=UBUNTU16.04
      - User has no DELETE permission for the specified resource
  switch_to_GEO_2_ADMIN_LAB:
    - - - conf key-gen
        - admin_lab2@example.com
        - password
      - Key successfully created and added to client configuration.
  check_ADMIN_LAB_two_projects:
    # admin_lab2@example.com is ADMIN_LAB in both GEO_1 and GEO_2
    - - system add --name=cpc3lp54 --hostname cpc3lp54 --type=LPAR
     # - Could not detect which project to use, specify one
    # - - system add --name=cpc3lp54 --hostname cpc3lp54 --type=LPAR --project GEO_1
      - Item added successfully.
    - - system add --name=cpc3lp55 --hostname cpc3lp55 --type=LPAR --project GEO_2
      - Item added successfully.
    # update and delete net resources
    - - net zone-add --name=GEO_2-NE --project GEO_2
      - Item added successfully.
    - - net zone-add --name=GEO_2-ERO --project GEO_2
      - Item added successfully.
    - - net zone-edit --name=GEO_2-ERO --desc 'Special zone'
      - Item successfully updated.
    - - net zone-del --name=GEO_2-ERO
      - Item successfully deleted.
  switch_to_GEO_1_ADMIN_PROJECT:
    - - - conf key-gen
        - proj_admin1@example.com
        - password
      - Key successfully created and added to client configuration.
  check_ADMIN_PROJECT:
    # 'system list', check systems from another project
    - - system list --project GEO_2
      - GEO_2
    # 'system add'
    - - system add --name=cpc3lp50 --hostname cpc3lp50 --type=LPAR
      - Item added successfully.
    # 'system del'
    - - system del --name cpc3lp50
      - Item successfully deleted.
    # 'system edit'
    - - system edit --name cpc3lp51 --owner=dev1@example.com
      - Item successfully updated.
    - - system edit --name cpc3lp52 --owner=dev2@example.com
      - Item successfully updated.
    - - system edit --name cpc3lp53 --owner=dev3@example.com
      - Item successfully updated.
    - - system edit --name cpc3lp54 --owner=dev5@example.com
      - Item successfully updated.
    # 'system edit' for system from another project
    - - system edit --name cpc3lp55 --owner=dev1@example.com
      - User has no UPDATE permission for the specified resource
    # assign a system to user from another project
    - - system edit --name cpc3lp51 --owner=dev4@example.com
      # - Owner is from another project
      - Item successfully updated.
    # 'system prof-add'
    - - system prof-add --system=cpc3lp51 --name=root2 --login=root:mypasswd
      - Item added successfully.
    # create storage resources
    - - storage server-add --name=DS8K18 --model=DS8000 --type=DASD-FCP
      # - User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - storage vol-add --server=DS8K16 --type=DASD --id=3952 --size=7gb
      # - User has no CREATE permission for the specified volume
      - No CREATE permission found for the user in any project
    # update and delete storage resources
    - - storage server-edit --name=DS8K15 --model=DS9000
      - User has no UPDATE permission for the specified resource
    - - storage server-del --name=DS8K15
      - User has no DELETE permission for the specified resource
      # not own resources
    - - storage vol-edit --id=3951 --size=10gb
      - User has no UPDATE permission for the specified volume
    - - storage vol-del --id=3951
      - User has no DELETE permission for the specified resource
      # own resources
    - - storage vol-edit --id=3950 --size=10gb
      - Item successfully updated.
    - - storage vol-del --id=3950
      - Item successfully deleted.
    # create and update net resources
    - - net subnet-add --zone=GEO_1-NE --name='GEO_1-NE-1823' --address=192.168.20.0/22
      - Item added successfully.
      # not own subnet
    - - net subnet-edit --zone=GEO_1-NE --name='GEO_1-NE-1822' --desc 'new subnet'
      - User has no UPDATE permission for the specified resource
    - - net subnet-del --zone=GEO_1-NE --name='GEO_1-NE-1822'
      - User has no DELETE permission for the specified resource
      # own subnet
    - - net subnet-edit --zone=GEO_1-NE --name='GEO_1-NE-1823' --desc 'new subnet'
      - Item successfully updated.
    - - net subnet-del --zone=GEO_1-NE --name='GEO_1-NE-1823'
      - Item successfully deleted.
      # zone
    - - net zone-add --name=GEO_1-ERO
      - Item added successfully.
    - - net zone-edit --name=GEO_1-ERO --desc='new zone'
      - Item successfully updated.
    - - net zone-del --name=GEO_1-ERO
      - Item successfully deleted.
      # ip
    - - net ip-add --subnet='GEO_1-NE-1822' --ip=192.168.161.52
      # - User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - net ip-edit --ip 192.168.161.51  --subnet='GEO_1-NE-1822' --owner dev1@example.com
      - User has no UPDATE permission for the specified resource
    - - net ip-del --ip 192.168.161.51  --subnet='GEO_1-NE-1822'
      - User has no DELETE permission for the specified resource
    # 'perm user-add'
    - - perm user-add --login=dev5@example.com --name='Developer 5' --title='Mr. Developer 5'
      - You need administrator privileges to perform this operation
    # 'perm role-grant'
    - - perm role-grant --login=dev3@example.com --name=USER --project='GEO_1'
      - User has no CREATE permission to grant user roles in this project
    # repo add, edit and delete
    - - repo add --name='RHEL7.3-GA' --url='http://example.com/redhat/s390x/RHEL7.3/DVD'
      - Item added successfully.
    - - repo edit --name='RHEL7.2-GA' --desc='for GEO_1 project'
      - Item successfully updated.
    - - repo del --name='RHEL7.2-GA'
      - Item successfully deleted.
    # autotemplate
    - - autotemplate add --name=UBUNTU16 --content='files/autotemplate-command_test/ubuntu16-default.jinja'
      - Item added successfully.
    - - autotemplate edit --name=UBUNTU16.04 --desc='Template for Ubuntu 16.04'
      - Item successfully updated.
    - - autotemplate del --name=UBUNTU16
      - Item successfully deleted.
  check_USER:
    # 'system list', check systems from another project
    - - system list --project GEO_2
      - GEO_2
    # create and update storage server
    - - storage server-add --name=DS8K17 --model=DS8000 --type=DASD-FCP
      # User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - storage server-edit --name=DS8K15 --model=DS9000
      - User has no UPDATE permission for the specified resource
    - - storage server-del --name=DS8K15
      - User has no DELETE permission for the specified resource
    # create and update storage volume
    - - storage vol-add --server=DS8K16 --type=DASD --id=3952 --size=7gb
      # - User has no CREATE permission for the specified volume
      - No CREATE permission found for the user in any project
      # not own volume
    - - storage vol-edit --id=3953 --size=20gb
      - User has no UPDATE permission for the specified volume
    - - storage vol-del --id=3953
      - User has no DELETE permission for the specified resource
      # not own volume but assigned to own system
    - - storage vol-edit --id=3956 --size=20gb
      - User has no UPDATE permission for the specified volume
    - - storage vol-del --id=3956
      - User has no DELETE permission for the specified resource
      # own volume
    - - storage vol-edit --id=3951 --size=20gb
      # - User has no UPDATE permission for the specified volume
      - Item successfully updated.
    - - storage vol-del --id=3951
      - Item successfully deleted.
    # create and update net resources
    - - net subnet-add --zone=GEO_1-NE --name='GEO_1-NE-1823' --address=192.168.20.0/22
      - Item added successfully.
      # not own subnet
    - - net subnet-edit --zone=GEO_1-NE --name='GEO_1-NE-1822' --desc 'new subnet'
      - User has no UPDATE permission for the specified resource
    - - net subnet-del --zone=GEO_1-NE --name='GEO_1-NE-1822'
      - User has no DELETE permission for the specified resource
      # own subnet
    - - net subnet-edit --zone=GEO_1-NE --name='GEO_1-NE-1823' --desc 'new subnet'
      - Item successfully updated.
    - - net subnet-del --zone=GEO_1-NE --name='GEO_1-NE-1823'
      - Item successfully deleted.
      # zone
    - - net zone-add --name=GEO_1-ERO
      - Item added successfully.
    - - net zone-edit --name=GEO_1-ERO --desc='lab zone'
      - Item successfully updated.
    - - net zone-del --name=GEO_1-ERO
      - Item successfully deleted.
      # ip
    - - net ip-add --subnet='GEO_1-NE-1822' --ip=192.168.161.52
      # - User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - net ip-edit --ip 192.168.161.51  --subnet='GEO_1-NE-1822' --owner dev1@example.com
      - User has no UPDATE permission for the specified resource
    - - net ip-del --ip 192.168.161.51  --subnet='GEO_1-NE-1822'
      - User has no DELETE permission for the specified resource
    # 'system add'
    - - system add --name=cpc3lp61 --hostname cpc3lp61 --type=LPAR
      - Item added successfully.
    # 'system edit' for own system
    - - system edit --name cpc3lp61 --desc 'lpar61'
      - Item successfully updated.
    # 'system edit' for not own system
    - - system edit --name cpc3lp52 --desc 'lpar52'
      - User has no UPDATE permission for the specified resource
    # 'system prof-add'
    - - system prof-add --system=cpc3lp61 --name=root3 --login=root:mypasswd
      - Item added successfully.
    # 'system prof-add' for not own system
    - - system prof-add --system=cpc3lp52 --name=root1 --login=root:mypasswd
      - User has no UPDATE permission for the specified resource
    # 'system prof-del'
    - - system prof-del --system=cpc3lp61 --name=root3
      - Item successfully deleted.
    # 'system del' for own system
    - - system del --name cpc3lp61
      - Item successfully deleted.
    # 'system del' for not own system
    - - system del --name cpc3lp52
      - User has no DELETE permission for the specified resource
    # repo add, update and delete
    - - repo add --name='RHEL7.2-GA' --url='http://example.com/redhat/s390x/RHEL7.2/DVD'
      # - User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - repo edit --name='RHEL7.3-GA' --desc='for GEO_1 project'
      - User has no UPDATE permission for the specified resource
    - - repo del --name='RHEL7.3-GA'
      - User has no DELETE permission for the specified resource
    # autotemplate
    - - autotemplate add --name=UBUNTU16 --content='files/autotemplate-command_test/ubuntu16-default.jinja'
      # User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - autotemplate edit --name=UBUNTU16.04 --desc='Template for Ubuntu 16.04'
      - User has no UPDATE permission for the specified resource
    - - autotemplate del --name=UBUNTU16.04
      - User has no DELETE permission for the specified resource
  switch_to_USER_PRIVILEGED:
    - - - conf key-gen
        - dev2@example.com
        - password
      - Key successfully created and added to client configuration.
  check_USER_PRIVILEGED:
    # 'system list', check systems from another project
    - - system list --project GEO_2
      - GEO_2
    # create and update storage server
    - - storage server-add --name=DS8K17 --model=DS8000 --type=DASD-FCP
      # User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - storage server-edit --name=DS8K15 --model=DS9000
      - User has no UPDATE permission for the specified resource
    - - storage server-del --name=DS8K15
      - User has no DELETE permission for the specified resource
    # create and update storage volume
    - - storage vol-add --server=DS8K16 --type=DASD --id=3952 --size=7gb
      # - User has no CREATE permission for the specified volume
      - No CREATE permission found for the user in any project
      # not own volume
    - - storage vol-edit --id=3955 --size=10gb
      - User has no UPDATE permission for the specified volume
    - - storage vol-del --id=3955
      - User has no DELETE permission for the specified resource
      # own volume
    - - storage vol-edit --id=3953 --size=20gb
      - Item successfully updated.
    - - storage vol-del --id=3953
      - Item successfully deleted.
    # create and update net resources
      # subnet in the zone from another project
    - - net subnet-add --zone=GEO_2-NE --name='GEO_2-NE-1822' --address=192.168.20.0/22
      # - User has no CREATE permission for the specified resource
      - Item added successfully.
    - - net subnet-add --zone=GEO_1-NE --name='GEO_1-NE-1823' --address=192.168.20.0/22
      - Item added successfully.
      # not own subnet
    - - net subnet-edit --zone=GEO_1-NE --name='GEO_1-NE-1822' --desc 'new subnet'
      - User has no UPDATE permission for the specified resource
    - - net subnet-del --zone=GEO_1-NE --name='GEO_1-NE-1822'
      - User has no DELETE permission for the specified resource
      # own subnet
    - - net subnet-edit --zone=GEO_1-NE --name='GEO_1-NE-1823' --desc 'new subnet'
      - Item successfully updated.
    - - net subnet-del --zone=GEO_1-NE --name='GEO_1-NE-1823'
      - Item successfully deleted.
      # zone
    - - net zone-add --name=GEO_1-ERO
      - Item added successfully.
    - - net zone-edit --name=GEO_1-ERO --desc='lab zone'
      - Item successfully updated.
    - - net zone-del --name=GEO_1-ERO
      - Item successfully deleted.
      # ip
    - - net ip-add --subnet='GEO_1-NE-1822' --ip=192.168.161.52
      # - User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - net ip-edit --ip 192.168.161.51  --subnet='GEO_1-NE-1822' --owner dev1@example.com
      - User has no UPDATE permission for the specified resource
    - - net ip-del --ip 192.168.161.51  --subnet='GEO_1-NE-1822'
      - User has no DELETE permission for the specified resource
    # 'system add'
    - - system add --name=cpc3lp62 --hostname cpc3lp62 --type=LPAR
      - Item added successfully.
    # 'system edit' for not own system in the project
    - - system edit --name cpc3lp53 --desc 'lpar53'
      - Item successfully updated.
    # 'system edit' for system from another project
    - - system edit --name cpc3lp55 --desc 'lpar55'
      - User has no UPDATE permission for the specified resource
    # 'system prof-add'
    - - system prof-add --system=cpc3lp62 --name=root1 --login=root:mypasswd
      - Item added successfully.
    # 'system prof-add' for not own system
    - - system prof-add --system=cpc3lp53 --name=root1 --login=root:mypasswd
      - Item added successfully.
    # 'system prof-del'
    - - system prof-del --system=cpc3lp62 --name=root1
      - Item successfully deleted.
    # 'system del' for own system
    - - system del --name cpc3lp62
      - Item successfully deleted.
    # 'system del' for not own system
    - - system del --name cpc3lp54
      - User has no DELETE permission for the specified resource
    # repo add, update and delete
    - - repo add --name='RHEL7.2-GA' --url='http://example.com/redhat/s390x/RHEL7.2/DVD'
      # - User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - repo edit --name='RHEL7.3-GA' --desc='for GEO_1 project'
      - User has no UPDATE permission for the specified resource
    - - repo del --name='RHEL7.3-GA'
      - User has no DELETE permission for the specified resource
    # autotemplate
    - - autotemplate add --name=UBUNTU16 --content='files/autotemplate-command_test/ubuntu16-default.jinja'
      # User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - autotemplate edit --name=UBUNTU16.04 --desc='Template for Ubuntu 16.04'
      - User has no UPDATE permission for the specified resource
    - - autotemplate del --name=UBUNTU16.04
      - User has no DELETE permission for the specified resource
  switch_to_USER_RESTRICTED:
    - - - conf key-gen
        - dev3@example.com
        - password
      - Key successfully created and added to client configuration.
  check_USER_RESTRICTED:
    # create and update storage server
    - - storage server-add --name=DS8K17 --model=DS8000 --type=DASD-FCP
      # User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - storage server-edit --name=DS8K15 --model=DS9000
      - User has no UPDATE permission for the specified resource
    - - storage server-del --name=DS8K15
      - User has no DELETE permission for the specified resource
    # create and update storage volume
    - - storage vol-add --server=DS8K16 --type=DASD --id=3952 --size=7gb
      # - User has no CREATE permission for the specified volume
      - No CREATE permission found for the user in any project
      # not own volume
    - - storage vol-edit --id=3955 --size=10gb
      - User has no UPDATE permission for the specified volume
    - - storage vol-del --id=3955
      - User has no DELETE permission for the specified resource
      # own volume
    - - storage vol-edit --id=3954 --size=20gb
      - Item successfully updated.
    - - storage vol-del --id=3954
      - Item successfully deleted.
    # 'system list', check systems from another project
    - - system list --project GEO_2
      - GEO_2
    # 'system add'
    - - system add --name=cpc3lp54 --hostname cpc3lp54 --type=LPAR
      # User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    # 'system edit' for own system
    - - system edit --name cpc3lp53 --desc 'lpar 53'
      - Item successfully updated.
    # 'system edit' for not own system
    - - system edit --name cpc3lp52 --desc 'lpar52'
      - User has no UPDATE permission for the specified resource
    # 'system prof-add'
    - - system prof-add --system=cpc3lp53 --name=root2 --login=root:mypasswd
      - Item added successfully.
    # 'system prof-add' for not own system
    - - system prof-add --system=cpc3lp52 --name=root2 --login=root:mypasswd
      - User has no UPDATE permission for the specified resource
    # 'system prof-del'
    - - system prof-del --system=cpc3lp53 --name=root2
      - Item successfully deleted.
    - - system prof-del --system=cpc3lp53 --name=root1
      - Item successfully deleted.
    # 'system del'
    - - system del --name cpc3lp53
      - Item successfully deleted.
    # create and update net resources
    - - net subnet-add --zone=GEO_1-NE --name='GEO_1-NE-1823' --address=192.168.20.0/22
      # User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - net subnet-edit --zone=GEO_1-NE --name='GEO_1-NE-1822' --desc 'new subnet'
      - User has no UPDATE permission for the specified resource
    - - net subnet-del --zone=GEO_1-NE --name='GEO_1-NE-1822'
      - User has no DELETE permission for the specified resource
      # zone
    - - net zone-add --name=GEO_1-ERO
      # - User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - net zone-edit --name=GEO_1-NE --desc='lab zone'
      - User has no UPDATE permission for the specified resource
    - - net zone-del --name=GEO_1-NE
      - User has no DELETE permission for the specified resource
      # ip
    - - net ip-add --subnet='GEO_1-NE-1822' --ip=192.168.161.52
      # - User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - net ip-edit --ip 192.168.161.51  --subnet='GEO_1-NE-1822' --owner dev1@example.com
      - User has no UPDATE permission for the specified resource
    - - net ip-del --ip 192.168.161.51  --subnet='GEO_1-NE-1822'
      - User has no DELETE permission for the specified resource
    # repo add, update and delete
    - - repo add --name='RHEL7.2-GA' --url='http://example.com/redhat/s390x/RHEL7.2/DVD'
      # - User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - repo edit --name='RHEL7.3-GA' --desc='for GEO_1 project'
      - User has no UPDATE permission for the specified resource
    - - repo del --name='RHEL7.3-GA'
      - User has no DELETE permission for the specified resource
    # autotemplate
    - - autotemplate add --name=UBUNTU16 --content='files/autotemplate-command_test/ubuntu16-default.jinja'
      # User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - autotemplate edit --name=UBUNTU16.04 --desc='Template for Ubuntu 16.04'
      - User has no UPDATE permission for the specified resource
    - - autotemplate del --name=UBUNTU16.04
      - User has no DELETE permission for the specified resource
  switch_to_USER_with_restricted_true:
    - - - conf key-gen
        - dev5@example.com
        - password
      - Key successfully created and added to client configuration.
  check_USER_with_restricted_true:
    # 'system list', check systems from another project
    - - system list --project GEO_2
      - No results were found.
    # create and update storage server
    - - storage server-add --name=DS8K17 --model=DS8000 --type=DASD-FCP
      # User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - storage server-edit --name=DS8K15 --model=DS9000
      - User has no UPDATE permission for the specified resource
    - - storage server-del --name=DS8K15
      - User has no DELETE permission for the specified resource
    # create and update storage volume
    - - storage vol-add --server=DS8K16 --type=DASD --id=3952 --size=7gb
      # - User has no CREATE permission for the specified volume
      - No CREATE permission found for the user in any project
      # not own volume
    - - storage vol-edit --id=3956 --size=20gb
      - User has no UPDATE permission for the specified volume
    - - storage vol-del --id=3956
      - User has no DELETE permission for the specified resource
      # own volume
    - - storage vol-edit --id=3955 --size=20gb
      - Item successfully updated.
    - - storage vol-del --id=3955
      - Item successfully deleted.
    # create and update net resources
    # user doesn't see resources from the other project
    - - net subnet-add --zone=GEO_2-NE --name='GEO_2-NE-1822' --address=192.168.20.0/22
      - No associated item found with value 'GEO_2-NE' for field 'Network zone'
    - - net subnet-add --zone=GEO_1-NE --name='GEO_1-NE-1823' --address=192.168.20.0/22
      - Item added successfully.
      # not own subnet
    - - net subnet-edit --zone=GEO_1-NE --name='GEO_1-NE-1822' --desc 'new subnet'
      - User has no UPDATE permission for the specified resource
    - - net subnet-del --zone=GEO_1-NE --name='GEO_1-NE-1822'
      - User has no DELETE permission for the specified resource
      # own subnet
    - - net subnet-edit --zone=GEO_1-NE --name='GEO_1-NE-1823' --desc 'new subnet'
      - Item successfully updated.
    - - net subnet-del --zone=GEO_1-NE --name='GEO_1-NE-1823'
      - Item successfully deleted.
      # zone
    - - net zone-add --name=GEO_1-ERO
      - Item added successfully.
    - - net zone-edit --name=GEO_1-ERO --desc='lab zone'
      - Item successfully updated.
    - - net zone-del --name=GEO_1-ERO
      - Item successfully deleted.
      # ip
    - - net ip-add --subnet='GEO_1-NE-1822' --ip=192.168.161.52
      # - User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - net ip-edit --ip 192.168.161.51  --subnet='GEO_1-NE-1822' --owner dev1@example.com
      - User has no UPDATE permission for the specified resource
    - - net ip-del --ip 192.168.161.51  --subnet='GEO_1-NE-1822'
      - User has no DELETE permission for the specified resource
    # 'system add'
    - - system add --name=cpc3lp65 --hostname cpc3lp65 --type=LPAR
      - Item added successfully.
    # 'system edit' for own system
    - - system edit --name cpc3lp65 --desc 'lpar65'
      - Item successfully updated.
    # 'system edit' for not own system
    - - system edit --name cpc3lp52 --desc 'lpar52'
      - User has no UPDATE permission for the specified resource
    # 'system prof-add'
    - - system prof-add --system=cpc3lp65 --name=root1 --login=root:mypasswd
      - Item added successfully.
    # 'system prof-add' for not own system
    - - system prof-add --system=cpc3lp52 --name=root1 --login=root:mypasswd
      - User has no UPDATE permission for the specified resource
    # 'system prof-del'
    - - system prof-del --system=cpc3lp65 --name=root1
      - Item successfully deleted.
    # 'system del'
    - - system del --name cpc3lp65
      - Item successfully deleted.
    # repo add, update and delete
    - - repo add --name='RHEL7.2-GA' --url='http://example.com/redhat/s390x/RHEL7.2/DVD'
      # - User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - repo edit --name='RHEL7.3-GA' --desc='for GEO_1 project'
      - User has no UPDATE permission for the specified resource
    - - repo del --name='RHEL7.3-GA'
      - User has no DELETE permission for the specified resource
    # autotemplate
    - - autotemplate add --name=UBUNTU16 --content='files/autotemplate-command_test/ubuntu16-default.jinja'
      # User has no CREATE permission for the specified resource
      - No CREATE permission found for the user in any project
    - - autotemplate edit --name=UBUNTU16.04 --desc='Template for Ubuntu 16.04'
      - User has no UPDATE permission for the specified resource
    - - autotemplate del --name=UBUNTU16.04
      - User has no DELETE permission for the specified resource

